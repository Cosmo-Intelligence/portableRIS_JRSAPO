<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ShadeQuest/RIS for Mobile</title>

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="css/application.css">

    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-datepicker.min.js"></script>
    <script src="js/bootstrap-datepicker.ja.min.js"></script>
    <script src="js/knockout-3.3.0.js"></script>
    <script src="js/knockout.mapping-latest.js"></script>
    <script src="js/async.js"></script>

    <script src="js/util.js"></script>
    <script src="js/comm.js"></script>
    <script src="js/application.js"></script>
    <script src="js/pr-library.js"></script>
    <script src="js/pr-status-defining.js"></script>

    <script type="text/html" id="orderTemplate">
      <table class="order-info ordertable">
        <colgroup>
          <col class="col-1"/>
          <col class="col-2"/>
          <col class="col-3"/>
          <col class="col-4"/>
          <col class="col-5"/>
          <col class="col-6"/>
          <col class="col-7"/>
        </colgroup>
        <tr class="row-1">
          <!-- 2020.09.02 Mod Nishihara@COSMO start 一覧画面のレイアウト変更対応 一覧画面のオーダーの位置を変更する"position"を追加 -->
          <td class="kanja-id position" data-bind="text: kanja_id">
          </td>
          <!-- 2020.09.02 Mod Nishihara@COSMO start 一覧画面のレイアウト変更対応 styleにpositionとleftを追加 -->
          <td rowspan="5" align="center">
            <!-- ko if: sex == "M" -->
            <img src="images/icMale2.png" style="max-width: 66px; position:relative; left:40px; border-collapse: separate;" />
            <!-- /ko -->
            <!-- ko if: sex == "F" -->
            <img src="images/icFemale2.png" style="max-width: 66px; position:relative; left:40px; border-collapse: separate;" />
            <!-- /ko -->
          </td>
          <!-- 2020.09.02 Mod Nishihara@COSMO end 一覧画面のレイアウト変更対応 styleにpositionとleftを追加 -->
          <td colspan="4" class="kanjisimei position" data-bind="text: kanjisimei">
          </td>
          <td rowspan="4"">
            <div class="btn-group-justified">
              <div class="btn-group">
                <!-- 2018.12.20 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
                <!-- <button type="button" class="btn btn-default" data-bind="click: $root.openDetail" style="height: 140px;">撮影<br />詳細</button> -->
                <button type="button" class="btn btn-default" data-bind="click: $root.openDetail, disable: $root.isReadMode" style="height: 120px;">撮影<br />詳細</button>
                <!-- 2018.12.20 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
              </div>
            </div>
          </td>
        </tr>
        <tr class="row-2">
          <td rowspan="2" class="text-center">
            <div class="status position" data-bind="style: {'background-color': $root.getStatusColorBk(status)}">
            <span data-bind="text: $root.getStatusLabel(status), style: {'color': $root.getStatusColor(status)}"></span>
            </div>
          </td>
          <td colspan="2" class="kanasimei position" data-bind="text: kanasimei"></td>
          <td class="title position">年齢：</td>
          <td class="kanja-age position" data-bind="text: age"></td>
        </tr>
        <tr class="row-3">
          <td class="title position">病棟：</td>
          <td class="position" data-bind="text: byoutou"></td>
          <td class="title position">依頼科：</td>
          <td class="position" data-bind="text: irai_section"></td>
        </tr>
        <tr class="row-4">
          <td rowspan="2" align="center">
            <!-- ko if: PrStatusDefining.canRegister(status) -->
            <!-- 2019.08.06 Mod COSMO Start 排他機能対応 -->
            <!-- 2018.12.20 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
            <!-- <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.register">受付</button> -->
            <!-- <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.register, disable: $root.isReadMode">受付</button> -->
            <button type="button" class="btn btn-default uketuke position" data-bind="click: $parent.register, disable: $root.isReadMode">受付</button>
            <!-- 2018.12.20 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
            <!-- 2019.08.06 Mod COSMO End 排他機能対応 -->
            <!-- 2019.06.06 Add H.Watanabe@COSMO Start 熊本大学PortableRIS改造対応 -->
            <!--  ko if: $root.useReceiptMWMFlg() -->
            <!-- 2020.09.02 Mod Nishihara@COSMO start 一括選択/一括解除追加対応 name="ordercheck"を追加 -->
            <input type="checkbox" name="ordercheck" class="receiptMWM" data-bind="attr: {id: 'mwm_' + ris_id}" />
            <!-- 2020.09.02 Mod Nishihara@COSMO end 一括選択/一括解除追加対応 name="ordercheck"を追加 -->
            <!-- /ko -->
            <!-- 2019.06.06 Add H.Watanabe@COSMO End   熊本大学PortableRIS改造対応 -->
            <!-- /ko -->
            <!-- ko if: status == 10 -->
            <!-- 2019.08.06 Mod COSMO Start 排他機能対応 -->
            <!-- 2018.12.20 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
            <!-- <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.unregister">取消</button> -->
            <!-- <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.unregister, disable: $root.isReadMode">取消</button> -->
            <button type="button" class="btn btn-default uketuke position" data-bind="click: $parent.unregister, disable: $root.isReadMode">取消</button>
            <!-- 2018.12.20 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
            <!-- 2019.08.06 Mod COSMO End 排他機能対応 -->
            <!-- 2019.06.06 Add H.Watanabe@COSMO Start 熊本大学PortableRIS改造対応 -->
            <!--  ko if: $root.useReceiptMWMFlg() -->
            <!-- 2020.09.03 Mod Nishihara@COSMO start 一括選択/一括解除追加対応 name="ordercheck"を追加、hiddenを削除 -->
            <!-- <input type="checkbox" class="receiptMWM" data-bind="attr: {id: 'mwm_' + ris_id}" style="visibility: hidden;" /> -->
            <input type="checkbox" name="ordercheck" class="receiptMWM" data-bind="attr: {id: 'mwm_' + ris_id}" />
            <!-- 2020.09.03 Mod Nishihara@COSMO end 一括選択/一括解除追加対応 name="ordercheck"を追加、hiddenを削除 -->
            <!-- /ko -->
            <!-- 2019.06.06 Add H.Watanabe@COSMO End   熊本大学PortableRIS改造対応 -->
            <!-- /ko -->
          </td>
          <td class="title position">病室：</td>
          <td class="position" data-bind="text: byousitu"></td>
          <td class="title position">依頼医：</td>
          <td class="position" data-bind="text: irai_doctor_name"></td>
        </tr>
        <!-- 2020.09.02 Mod Nishihara@COSMO end 一覧画面のレイアウト変更対応 一覧画面のオーダーの位置を変更する"position"を追加 -->
        <tr class="row-5">
          <td></td>
          <td></td>
          <td></td>
          <td>
            <span data-bind="text: renraku_memo" style="color: #00b050; font-weight: bold"></span>
          </td>
          <td>
            <div data-bind="if: PrLibrary.usesViewAir(viewAirUrl)"><button type="button" class="btn btn-default" data-bind="click: PrLibrary.openNewWindow.bind($data, viewAirUrl)">ViewAir</button></div>
          </td>
        </tr>
      </table>
    </script>
  </head>
  <body>

<!-- ko with: loginForm -->
<div class="container" style="width: 724px; background-color: #254061">
  <div class="row header-row" style="background-image: url(images/header.png)">
    <div class="col-sm-5">
      <img class="logo-image" src="images/logo2.png" />
    </div>
    <div class="col-sm-5">
      <h4></h4>
    </div>
    <div class="col-sm-2">
      <div class="btn-group-justified">
        <div class="btn-group">
          <button type="button" class="btn btn-default" onclick="window.open('about:blank','_self').close()">閉じる</button>
        </div>
      </div>
    </div>
  </div>
  <div class="row" style="margin-top: 20px">
    <div class="panel panel-default col-sm-offset-1 col-sm-10">
      <form class="form-horizontal" style="margin-top: 15px">
        <div class="form-group">
          <label for="inputUserId" class="col-sm-3 control-label">ユーザID：</label>
          <div class="col-sm-9">
            <input type="tel" class="form-control" id="inputUserId" data-bind="value: userId">
          </div>
        </div>
        <div class="form-group">
          <label for="inputPassword" class="col-sm-3 control-label">パスワード：</label>
          <div class="col-sm-9">
            <input type="password" class="form-control" id="inputPassword" data-bind="value: password">
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-3 col-sm-3">
            <div class="btn-group-justified">
              <div class="btn-group">
                <!-- 2018.12.20 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
                <!-- <button type="button" class="btn btn-default" id="btnLogin" data-bind="click: $root.doLogin">ログイン</button> -->
                <button type="button" class="btn btn-default" id="btnLogin" data-bind="click: $root.doLogin.bind($root, 'delLock')">ログイン</button>
                <!-- 2018.12.20 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
              </div>
            </div>
          </div>
          <div class="col-sm-offset col-sm-3">
            <div class="btn-group-justified">
              <div class="btn-group">
                <button type="button" class="btn btn-default" id="loginClear" data-bind="click: clearUserId.bind($data, null)">IDクリア</button>
              </div>
            </div>
          </div>
          <!-- 2018.12.20 Add H.Watanabe@COSMO Start 呼出参照機能対応 -->
          <div class="col-sm-offset col-sm-3">
            <div class="btn-group-justified">
              <div class="btn-group">
                <button type="button" class="btn btn-default" data-bind="click: $root.doLogin.bind($root, 'read')">参照</button>
              </div>
            </div>
          </div>
          <!-- 2018.12.20 Add H.Watanabe@COSMO End   呼出参照機能対応 -->
        </div>
      </form>
    </div>
  </div>
</div>
<!-- /ko -->

<!-- ko with: orderListForm -->
<div class="container" style="width: 724px; background-color: #254061">
  <div class="row header-row" style="background-image: url(images/header.png)">
    <div class="col-sm-2">
      <img class="logo-image" src="images/logo2.png" />
    </div>
    <div class="col-sm-8 text-center login-user-name">
      <span class="h4" data-bind="text: $root.loginUserName" style="color: #FFFFFF"></span>
    </div>
    <div class="col-sm-2">
      <div class="btn-group-justified">
        <div class="btn-group">
          <button type="button" class="btn btn-default" data-bind="click: $root.doLogout">ログアウト</button>
        </div>
      </div>
    </div>
  </div>

  <div class="row upside" style="margin-top: 10px">
    <div class="col-sm-10">
      <div class="row">
        <div class="col-sm-6">
          <input type="text" class="form-control" id="calendar-text" data-bind="value: kensaDate" readonly style="background-color: #FFFFFF">
        </div>
        <div class="form-inline form-group col-sm-6">
          <label for="nyugai-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">入外区分：</label>
          <select class="form-control" data-bind="options: $root.nyugaiMaster, optionsText: 'name', value: selectedNyugai, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="nyugai-list" style="width: 198px">
          </select>
        </div>
      </div>

      <div class="row">
        <div class="form-inline form-group col-sm-6">
          <label for="kanjaid" class="control-label text-right" style="width: 80px; color: #FFFFFF">患者ID：</label>
          <input id="kanjaid" type="tel" class="form-control" data-bind="value: kanjaId, attr: {maxlength: $root.kanjaIdLength}, event: {change: padKanjaId}" style="width: 198px">
        </div>
        <div class="form-inline form-group col-sm-6">
          <label for="byoutou-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">病棟：</label>
          <select class="form-control" data-bind="options: $root.byoutouMaster, optionsText: 'name', value: selectedByoutou, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="byoutou-list" style="width: 198px">
          </select>
        </div>
      </div>

      <div class="row">
        <div class="form-inline form-group col-sm-6">
          <label for="uketuke-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">受付者：</label>
          <select class="form-control" data-bind="options: $root.uketukeMaster, optionsText: 'name', value: selectedUketuke, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="uketuke-list" style="width: 198px">
          </select>
        </div>
        <div class="form-inline form-group col-sm-6">
          <label for="kensatype-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">検査種別：</label>
          <select class="form-control" data-bind="options: $root.kensaTypeMaster, optionsText: 'name', value: selectedKensaType, optionsValue: 'id'" id="kensatype-list" style="width: 198px">
          </select>
        </div>
      </div>

      <!--  ko if: $root.usePortableKbnFlg() -->
      <div class="row">
        <div class="col-sm-6">
        </div>
        <div class="form-inline form-group col-sm-6">
          <label for="portable-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">ﾎﾟｰﾀﾌﾞﾙ：</label>
          <select class="form-control" data-bind="options: $root.portableMaster, optionsText: 'name', value: selectedPortable, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="portable-list" style="width: 198px">
          </select>
        </div>
      </div>
      <!-- /ko -->

      <div class="row">
        <div class="form-inline form-group col-sm-6">
          <label for="sort-list" class="control-label text-right" style="width: 80px; color: #FFFFFF">並び替え：</label>
          <select class="form-control" data-bind="options: $root.sortMaster, optionsText: 'name', value: selectedSort, optionsValue: 'id'" id="sort-list" style="width: 198px">
          </select>
        </div>
        <div class="col-sm-6">
          <div class="btn-group-justified">
		   <!-- 2020.08.26 Add Nishihara@COSMO start 進捗ボタン背景・文字色設定対応 検査進捗ボタンフラグ追加-->
           <!-- ko if: $root.statusColorFlg() == true -->
			<div class="btn-group">
              <button type="button" id="miuke" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(0), click: search.bind($data, 0)"></button>
            </div>
            <!-- 2020.12.09 Mod Nishihara@COSMO start 呼出追加、保留削除対応 -->
			<div class="btn-group">
              <button type="button" id="yobidashi" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(2), click: search.bind($data, 2)"></button>
            </div>
            <div class="btn-group">
              <button type="button" id="ukezumi" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(10), click: search.bind($data, 10)"></button>
            </div>
            <div class="btn-group">
              <button type="button" id="kenchu" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(20), click: search.bind($data, 20)"></button>
            </div>
			<!-- <div class="btn-group"> -->
			<!-- <button type="button" id="horyu" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(21), click: search.bind($data, 21)"></button> -->
			<!-- </div> -->
            <!-- 2020.12.09 Mod Nishihara@COSMO End 呼出追加、保留削除対応 -->
            <div class="btn-group">
              <button type="button" id="kenzumi" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(90), click: search.bind($data, 90)"></button>
            </div>
           <!-- /ko -->
           <!-- ko if: $root.statusColorFlg() == false -->
            <div class="btn-group">
              <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(0), style: {'color': $root.getStatusColor(0), 'background-color': $root.getStatusColorBk(0)}, click: search.bind($data, 0)"></button>
            </div>
            <!-- 2020.09.15 Mod Nishihara@COSMO start 呼出削除、検中追加対応 -->
            <!-- 2018.12.20 Add H.Watanabe@COSMO Start 呼出参照機能対応 -->
			<div class="btn-group">
              <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(2), style: {'color': $root.getStatusColor(2), 'background-color': $root.getStatusColorBk(2)}, click: search.bind($data, 2)"></button>
            </div>
            <!-- 2018.12.20 Add H.Watanabe@COSMO End   呼出参照機能対応 -->
            <div class="btn-group">
              <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(10), style: {'color': $root.getStatusColor(10), 'background-color': $root.getStatusColorBk(10)}, click: search.bind($data, 10)"></button>
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(20), style: {'color': $root.getStatusColor(20), 'background-color': $root.getStatusColorBk(20)}, click: search.bind($data, 20)"></button>
            </div>
            <!-- 2020.09.15 Mod Nishihara@COSMO end 呼出削除、検中追加対応 -->
			<!-- <div class="btn-group"> -->
			<!-- <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(21), style: {'color': $root.getStatusColor(21), 'background-color': $root.getStatusColorBk(21)}, click: search.bind($data, 21)"></button> -->
			<!-- </div> -->
            <div class="btn-group">
              <button type="button" class="btn btn-default colored" data-bind="text: $root.getStatusLabel(90), style: {'color': $root.getStatusColor(90), 'background-color': $root.getStatusColorBk(90)}, click: search.bind($data, 90)"></button>
            </div>
       	   <!-- /ko -->
           <!-- 2020.08.26 Add Nishihara@COSMO end 進捗ボタン背景・文字色設定対応 検査進捗ボタンフラグ追加-->
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-2">
      <div class="btn-group-justified">
        <div class="btn-group">
          <button id="search" type="button" class="btn btn-default" data-bind="click: search.bind($data, null), style: {height: $root.usePortableKbnFlg() ? '182px' : '132px'}">全表示</button>
        </div>
      </div>
    </div>
    <div class="col-sm-2" style="margin-top: 14px;">
      <div class="btn-group-justified">
        <div class="btn-group">
          <button id="clear" type="button" class="btn btn-default" data-bind="click: clearKanjaId.bind($data, null)" style="height: 37px;">IDクリア</button>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <hr style="border-top-style: dashed; margin: 0px 0px 15px 0px" />
    </div>
  </div>

  <div class="row upside">
    <div class="form-inline form-group col-sm-5">
      <label for="kensasitu-list" class="control-label text-right" style="width: 80px; color: yellow">検査室：</label>
      <select class="form-control" data-bind="options: $root.kensasituMaster, optionsText: 'name', value: $root.selectedKensasitu, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true, event: {change: $root.changeKensasitu}" id="kensasitu-list" style="width: 198px; background-color: yellow">
      </select>
    </div>
    <div class="form-inline form-group col-sm-5">
      <label for="kensakiki-list" class="control-label text-right" style="width: 80px; color: yellow">検査機器：</label>
      <select class="form-control" data-bind="options: $root.kensaKikiMaster, optionsText: 'name', value: $root.selectedKensaKiki, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="kensakiki-list" style="width: 198px; background-color: yellow">
      </select>
    </div>
    <div class="col-sm-2 text-right" style="margin-top: 10px;">
      <label class="control-label" style="color: #FFFFFF">
        <span>件数：</span><span data-bind="text: orders().length"></span><span>件</span>
      </label>
    </div>
	<!-- 2020.09.04 Add Nishihara@COSMO start 一括選択、一括解除、●受付、●MWMボタン追加 -->
     <div class="btn-group">
       <button type="button" class="btn btn-default lump-selectbtn" data-bind="click: allcheck.bind($data, true), disable: $root.isReadMode">一括選択</button>
     </div>
     <div class="btn-group">
       <button type="button" class="btn btn-default lump-cancellationbtn" data-bind="click: allcheck.bind($data, false), disable: $root.isReadMode">一括解除</button>
     </div>
     <div class="btn-group">
       <button type="button" class="btn allukezumibtn" data-bind="click: ukezumistart.bind($data, orders()), disable: $root.isReadMode">●受付</button>
     </div>
     <div class="btn-group">
       <button type="button" class="btn mwm-startbtn" data-bind="click: mwmstart.bind($data, orders()), disable: $root.isReadMode">●MWM</button>
     </div>
     <!-- 2020.09.04 Add Nishihara@COSMO end 一括選択、一括解除、●受付、●MWMボタン追加 -->
  </div>

  <div class="row" data-bind="template: {name: 'orderTemplate', foreach: orders}" style="height: 648px; overflow-y :scroll; -webkit-overflow-scrolling: touch">
  </div>
</div>
<!-- /ko -->

<!-- ko with: orderDetailForm -->
<div class="container" style="width: 724px; background-color: #254061">
  <div class="row header-row" style="background-image: url(images/header.png)">
    <div class="col-sm-2">
      <img class="logo-image" src="images/logo2.png" />
    </div>
    <div class="col-sm-8 text-center login-user-name">
      <span class="h4" data-bind="text: $root.loginUserName" style="color: #FFFFFF"></span>
    </div>
  </div>

  <div class="row upside" style="margin-top: 15px; margin-bottom: 15px">
    <div class="col-sm-10">
      <div class="row" style="height: 49px;">
        <div class="col-sm-6">
          <input type="text" class="form-control" data-bind="value: util.dateToJpDate(util.dateFromYYYYMMDD(orderDetail().kensa_date()))" readonly style="background-color: #FFFFFF" />
        </div>
      </div>
      <div class="row">
        <div class="form-inline form-group col-sm-6">
          <label for="kensasitu-list" class="control-label text-right" style="width: 80px; color: yellow">検査室：</label>
          <select class="form-control" data-bind="options: $root.kensasituMaster, optionsText: 'name', value: $root.selectedKensasitu, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true, event: {change: $root.changeKensasitu}" id="kensasitu-list" style="width: 198px; background-color: yellow">
          </select>
        </div>
        <div class="form-inline form-group col-sm-6">
          <label for="kensakiki-list" class="control-label text-right" style="width: 80px; color: yellow">検査機器：</label>
          <select class="form-control" data-bind="options: $root.kensaKikiMaster, optionsText: 'name', value: $root.selectedKensaKiki, optionsValue: 'id', optionsCaption: '(指定しない)', valueAllowUnset: true" id="kensakiki-list" style="width: 198px; background-color: yellow">
          </select>
        </div>
      </div>
    </div>
    <div class="col-sm-2">
      <div class="btn-group-justified">
        <div class="btn-group">
          <button type="button" class="btn btn-default" data-bind="click: back.bind($data, $data.orderDetail())" style="height: 84px;">戻る</button>
        </div>
      </div>
    </div>
  </div>


  <!-- ko with: orderDetail -->
  <div class="row">
    <table class="order-info ordertable" style="width: 100%">
      <colgroup>
        <col class="col-1"/>
        <col class="col-2"/>
        <col class="col-3"/>
        <col class="col-4"/>
        <col class="col-5"/>
        <col class="col-6"/>
        <col class="col-7"/>
      </colgroup>
      <tr class="row-1">
        <td class="kanja-id" data-bind="text: kanja_id">
        </td>
        <td rowspan="5" align="center">
            <!-- ko if: sex() == "M" -->
            <img src="images/icMale2.png" style="max-width: 66px" />
            <!-- /ko -->
            <!-- ko if: sex() == "F" -->
            <img src="images/icFemale2.png" style="max-width: 66px" />
            <!-- /ko -->
        </td>
        <td colspan="4" class="kanjisimei" data-bind="text: kanjisimei">
        </td>
        <td class="title" style="text-align: left">受付No.</td>
      </tr>
      <tr class="row-2">
        <td rowspan="2" class="text-center">
          <div class="status" data-bind="style: {'background-color': $root.getStatusColorBk(status())}">
          <span data-bind="text: $root.getStatusLabel(status()), style: {'color': $root.getStatusColor(status())}"></span>
          </div>
        </td>
        <td colspan="2" class="kanasimei" data-bind="text: kanasimei"></td>
        <td class="title">年齢：</td>
        <td class="kanja-age" data-bind="text: age"></td>
        <td data-bind="text: receiptnumber"></td>
      </tr>
      <tr class="row-3">
        <td class="title">病棟：</td>
        <td data-bind="text: byoutou"></td>
        <td class="title">依頼科：</td>
        <td data-bind="text: irai_section"></td>
        <td class="title" style="text-align: left">受付時間</td>
      </tr>
      <tr class="row-4">
        <td rowspan="2" align="center">
          <!-- ko if: PrStatusDefining.canRegister(status()) -->
          <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.register">受付</button>
          <!-- /ko -->
          <!-- ko if: status() == 10 -->
          <button type="button" class="btn btn-default uketuke" data-bind="click: $parent.unregister">取消</button>
          <!-- /ko -->
        </td>
        <td class="title">病室：</td>
        <td data-bind="text: byousitu"></td>
        <td class="title">依頼医：</td>
        <td data-bind="text: irai_doctor_name"></td>
        <td data-bind="text: util.dateToTime5(util.dateFromString(receiptdate()))"></td>
      </tr>
      <tr class="row-5">
        <td class="title">AcNo：</td>
        <td colspan="2" data-bind="text: acno" style="font-weight: bold"></td>
        <td></td>
        <td>
          <div data-bind="if: PrLibrary.usesViewAir(viewAirUrl())"><button type="button" class="btn btn-default" data-bind="click: PrLibrary.openNewWindow.bind($data, viewAirUrl())">ViewAir</button></div>
        </td>
      </tr>
    </table>
    <table class="order-info" style="width: 100%; border-top-style: none">
      <colgroup>
        <!-- 2023.07.26 Mod Nishihara@COSMO Start 撮影済ボタン機能追加 -->
        <col style="width: 200px"/>
        <col style="width: 200px"/>
        <col style="width: 150px"/>
        <!-- <col style="width: 220px"/> -->
        <!-- <col style="width: 220px"/> -->
        <!-- <col style="width: 190px"/> -->
        <!-- 2023.07.26 Mod Nishihara@COSMO End 撮影済ボタン機能追加 -->
        <col style=""/>
      </colgroup>
      <tr>
        <td align="center">
          <!-- 2019.03.07 Mod H.Watanabe@COSMO Start 20190301：山形中央病院向け対応 -->
          <button type="button" class="btn btn-default btn-lg colored status-progress" data-bind="click: $parent.start, enable: !$parent.startEnabled() && (status() == 10 || status() == 20 || status() == 21)">開始</button>
          <!-- <button type="button" class="btn btn-default btn-lg colored status-progress" data-bind="click: $parent.start, enable: status() == 10 || status() == 20 || status() == 21, disable: $parent.startEnabled()">開始</button> -->
          <!-- 2019.03.07 Mod H.Watanabe@COSMO End   20190301：山形中央病院向け対応 -->
        </td>
        <td align="center">
          <button type="button" class="btn btn-default btn-lg colored status-progress" data-bind="click: $parent.finish, enable: status() == 20">完了</button>
        </td>
        <td align="center">
          <!-- ko if: $root.useMPPSFlg() && ($parent.kensaKbn=="1") -->
          <div class="checkbox">
            <label>
              <input type="checkbox" checked style="vertical-align: middle; position: relative" data-bind="checked: $parent.mppsChecked, enable: kensa_kbn() == 1"/> MPPSモード
            </label>
          </div>
          <!-- /ko -->
        </td>
        <!-- 2023.07.26 Add Nishihara@COSMO Start 撮影済ボタン機能追加 -->
        <td align="center">
          <button type="button" class="btn btn-default border-colored" style="width: 90%;" data-bind="click: $parent.satuei, enable: status() >= 10">撮影済</button>
        </td>
        <!-- 2023.07.26 Add Nishihara@COSMO End 撮影済ボタン機能追加 -->
        <td align="center">
          <!-- 2023.07.26 Mod Nishihara@COSMO Start 撮影済ボタン機能追加 -->
          <button type="button" class="btn btn-default border-colored" style="width: 90%;" data-bind="click: $parent.rest, enable: status() >= 20">保留</button>
          <!-- <button type="button" class="btn btn-default border-colored" style="width: 80%;" data-bind="click: $parent.rest, enable: status() >= 20">保留</button> -->
          <!-- 2023.07.26 Mod Nishihara@COSMO End 撮影済ボタン機能追加 -->
        </td>
      </tr>
    </table>
  </div>

  <div class="row accordion-group">
    <div class="accordion-heading">
      <span class="accordion-toggle" data-toggle="collapse" href="#bui" style="color: #FFFFFF; cursor: pointer">撮影部位 (部位/方向/左右/検査方法)</span>
    </div>
    <div id="bui" class="accordion-body collapse in">
      <div class="accordion-inner order-info order-comment" style="border-top-style: none">
        <div class="lines" data-bind="text: satueibui_info"></div>
      </div>
    </div>
  </div>

  <div class="row accordion-group">
    <div class="accordion-heading">
      <span class="accordion-toggle" data-toggle="collapse" href="#irai" style="color: #FFFFFF; cursor: pointer">依頼情報</span>
    </div>
    <div id="irai" class="accordion-body collapse in">
      <div class="accordion-inner order-info order-comment" style="border-top-style: none">
        <div class="lines" data-bind="text: irai_info"></div>
      </div>
    </div>
  </div>

  <div class="row accordion-group">
    <div class="accordion-heading">
      <span class="accordion-toggle" data-toggle="collapse" href="#profile" style="color: #FFFFFF; cursor: pointer">患者プロファイル情報</span>
    </div>
    <div id="profile" class="accordion-body collapse in">
      <div class="accordion-inner order-info order-comment" style="border-top-style: none">
        <div class="lines" data-bind="text: kanja_info"></div>
      </div>
    </div>
  </div>

  <!-- 2020.09.14 Add Nishihara@COSMO end 実施技師登録機能追加対応 実施者（担当技師）プルダウン追加 -->
  <div class="row accordion-group">
    <div class="accordion-heading">
      <span class="accordion-toggle" data-toggle="collapse" href="#zisshisha" style="color: #FFFFFF; cursor: pointer">実施者（担当技師）</span>
    </div>
    <div id="zisshisha" class="accordion-body collapse in">
      <div class="accordion-inner order-info order-comment" style="border-top-style: none">
        <span class="form-inline form-group gishi1">
          <select class="form-control" id="zisshisha1" style="width: 198px" data-bind="options: $root.zisshishaMaster, optionsText: 'userName', optionsValue: 'userId', optionsCaption: '', value: $parent.selectedZisshishaId1">
          </select>
        </span>
        <span class="form-inline form-group gishi2">
          <select class="form-control" id="zisshisha2" style="width: 198px" data-bind="options: $root.zisshishaMaster, optionsText: 'userName', optionsValue: 'userId', optionsCaption: '', value: $parent.selectedZisshishaId2">
          </select>
        </span>
        <span class="form-inline form-group gishi3">
          <select class="form-control" id="zisshisha3" style="width: 198px" data-bind="options: $root.zisshishaMaster, optionsText: 'userName', optionsValue: 'userId', optionsCaption: '', value: $parent.selectedZisshishaId3">
          </select>
        </span>
      </div>
    </div>
  </div>
  <!-- 2020.09.14 Add Nishihara@COSMO end 実施技師登録機能追加対応 実施者（担当技師）プルダウン追加 -->

  <div class="row accordion-group">
    <div class="accordion-heading">
      <span class="accordion-toggle" data-toggle="collapse" href="#memo" style="color: #FFFFFF; cursor: pointer">連絡メモ</span>
    </div>
    <div id="memo" class="accordion-body collapse in">
      <div class="accordion-inner order-info order-comment">
        <table style="width: 100%;">
        <colgroup>
          <col style="width: 608px"/>
          <col style=""/>
        </colgroup>
          <tr>
            <td>
              <div class="form-inline form-group">
                <label for="template-list" class="control-label text-right" style="">テンプレート：</label>
                <select id="template-list" class="form-control" style="width: 198px" data-bind="options: $root.templateMaster, optionsText: 'name', optionsValue: 'id', optionsCaption: '', value: $parent.selectedTemplate, event: {change: $parent.addTemplate}">
                </select>
              </div>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <textarea class="form-control" rows="4" data-bind="value: renraku_memo, attr: {maxlength: $root.renrakuMemoLength}" style="font-size: 18px;">
              </textarea>
            </td>
            <td align="right">
              <button type="button" class="btn btn-default border-colored" data-bind="click: $parent.updateMemo" style="width: 80%">更新</button>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <!-- /ko -->

  <!-- ko with: deferModalDlg -->
  <div class="modal" id="deferModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog" style="padding-top: 15%">
      <div class="modal-content">
        <div class="modal-header" style="border-radius: 5px 5px 0px 0px; background-color: #2E86D2; padding-top: 5px;padding-bottom: 5px;">
          <img class="logo-image" src="images/logo2.png" />
        </div><!-- /modal-header -->
        <div class="modal-body" style="padding-bottom: 0px">
          <p class="recipient">撮影情報に差分がある為、検査保留にします。</p>
          <table>
            <colgroup>
              <col style="width: 284px" />
              <col style="width: 284px" />
            </colgroup>
            <tr>
              <td>
                <p>RIS撮影情報：</p>
              </td>
              <td>
                <p>MPPS情報：</p>
              </td>
            </tr>
            <tr>
              <td>
                <table class="table table-striped table-bordered table-condensed" style="margin-bottom: 0px">
                  <colgroup>
                    <col style="width: 85px" />
                    <col style="" />
                  </colgroup>
                  <tr class="info">
                    <th>コード</th>
                    <th>撮影メニュー名</th>
                  </tr>
                </table>
              </td>
              <td>
                <table class="table table-striped table-bordered table-condensed" style="margin-bottom: 0px">
                  <colgroup>
                    <col style="width: 85px" />
                    <col style="" />
                  </colgroup>
                  <tr class="info">
                    <th>コード</th>
                    <th>撮影メニュー名</th>
                  </tr>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <div style="height: 300px; overflow-y: scroll; -webkit-overflow-scrolling: touch">
                  <table class="table table-striped table-bordered table-condensed" style="margin-bottom: 0px">
                    <colgroup>
                      <col style="width: 85px" />
                      <col style="" />
                    </colgroup>
                    <tbody>
                      <!-- ko foreach: risSatueiInfo -->
                      <tr>
                        <td data-bind="text: id"></td>
                        <td data-bind="text: name"></td>
                      </tr>
                      <!-- /ko -->
                    </tbody>
                  </table>
                </div>
              </td>
              <td>
                <div style="height: 300px; overflow-y: scroll; -webkit-overflow-scrolling: touch">
                  <table class="table table-striped table-bordered table-condensed" style="margin-bottom: 0px">
                    <colgroup>
                      <col style="width: 85px" />
                      <col style="" />
                    </colgroup>
                    <tbody>
                      <!-- ko foreach: mppsInfo -->
                      <tr>
                        <td data-bind="text: id"></td>
                        <td data-bind="text: name"></td>
                      </tr>
                      <!-- /ko -->
                    </tbody>
                  </table>
                </div>
              </td>
            </tr>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
        </div>
      </div> <!-- /.modal-content -->
    </div> <!-- /.modal-dialog -->
  </div> <!-- /.modal -->
  <!-- /ko -->
</div>
<!-- /ko -->

<!-- ko with: reloginModalDlg -->
<div class="modal" id="reloginModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" style="padding-top: 15%">
    <div class="modal-content">
      <div class="modal-header" style="border-radius: 5px 5px 0px 0px; background-color: #2E86D2; padding-top: 5px;padding-bottom: 5px;">
        <img class="logo-image" src="images/logo2.png" />
      </div><!-- /modal-header -->
      <div class="modal-body">
        <p class="recipient" style="white-space: pre-wrap">一定時間が経過したためロックしました。<br>再開するにはもう一度ログインしてください。</p>
        <p />
        <div class="row" style="margin-top: 20px">
          <div class="col-sm-11">
            <form class="form-horizontal" style="margin-top: 15px">
              <div class="form-group">
                <label for="inputUserId" class="col-sm-3 control-label">ユーザID：</label>
                <div class="col-sm-9">
                  <input type="tel" class="form-control" id="inputUserId2" data-bind="value: userId" disabled>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-sm-3 control-label">パスワード：</label>
                <div class="col-sm-9">
                  <!-- 2018.12.20 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
                  <!-- <input type="password" class="form-control" id="inputPassword2" data-bind="value: password"> -->
                  <input type="password" class="form-control" id="inputPassword2" data-bind="value: password, disable: $root.isReadMode">
                  <!-- 2018.12.20 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-3 col-sm-3">
                  <div class="btn-group-justified">
                    <div class="btn-group">
                      <!-- 2018.12.17 Mod H.Watanabe@COSMO Start 呼出参照機能対応 -->
                      <!-- <button type="button" class="btn btn-default" data-bind="click: $root.doRelogin.bind($root, '')">ログイン</button> -->
                      <button type="button" class="btn btn-default" data-bind="click: $root.doRelogin.bind($root, ''), disable: $root.isReadMode">ログイン</button>
                      <!-- 2018.12.17 Mod H.Watanabe@COSMO End   呼出参照機能対応 -->
                    </div>
                  </div>
                </div>
                <!-- 2018.12.20 Add H.Watanabe@COSMO Start 呼出参照機能対応 -->
                <div class="col-sm-offset col-sm-3">
                  <div class="btn-group-justified">
                    <div class="btn-group">
                      <button type="button" class="btn btn-default" data-bind="click: $root.doRelogin.bind($root, 'read'), enable: $root.isReadMode">参照</button>
                    </div>
                  </div>
                </div>
                <!-- 2018.12.20 Add H.Watanabe@COSMO End   呼出参照機能対応 -->
              </div>
            </form>
          </div>
        </div>
      </div> <!-- /modal-body -->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
      </div>
    </div> <!-- /.modal-content -->
  </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
<!-- /ko -->

<!-- ko with: messageModalDlg -->
<div class="modal" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" style="padding-top: 15%">
    <div class="modal-content">
      <div class="modal-header" style="border-radius: 5px 5px 0px 0px; background-color: #2E86D2; padding-top: 5px;padding-bottom: 5px;">
        <img class="logo-image" src="images/logo2.png" />
      </div><!-- /modal-header -->
      <div class="modal-body">
        <p class="recipient" data-bind="text: message" style="white-space: pre-wrap"></p>
      </div>
      <div class="modal-footer">
      <!-- ko foreach: buttons -->
        <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="text: $data, click: $parent.clickButton.bind($data, $index())"></button>
      <!-- /ko -->
      </div>
    </div> <!-- /.modal-content -->
  </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
<!-- /ko -->

<!-- ko with: errorModalDlg -->
<div class="modal" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" style="padding-top: 15%">
    <div class="modal-content">
      <div class="modal-header" style="border-radius: 5px 5px 0px 0px; background-color: #d9534f; padding-top: 5px;padding-bottom: 5px;">
        <img class="logo-image" src="images/logo2.png" />
      </div><!-- /modal-header -->
      <div class="modal-body">
        <p class="recipient" style="white-space: pre-wrap">処理中にエラーが発生しました。システム管理者にご連絡ください。</p>
        <p />
        <div class="row accordion-group" style="padding: 5px 20px 5px 20px">
          <div class="accordion-heading">
            <span class="accordion-toggle collapsed" data-toggle="collapse" href="#error" style="cursor: pointer">詳細</span>
          </div>
          <div id="error" class="accordion-body collapse">
            <div class="accordion-inner">
              <div class="recipient" data-bind="text: error" style="white-space: pre-wrap"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">閉じる</button>
      </div>
    </div> <!-- /.modal-content -->
  </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
<!-- /ko -->

<!-- ko with: progressModalDlg -->
<div class="modal" id="progressModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog" style="padding-top: 15%">
    <div class="modal-content">
      <div class="modal-header" style="border-radius: 5px 5px 0px 0px; background-color: #2E86D2; padding-top: 5px;padding-bottom: 5px;">
        <img class="logo-image" src="images/logo2.png" />
      </div><!-- /modal-header -->
      <div class="modal-body">
        <p class="recipient" style="white-space: pre-wrap">サーバと通信中です。</p>
        <div class="progress progress-striped active">
          <div class="progress-bar" style="width: 100%;">
          </div>
        </div>
      </div>
      <div class="modal-footer">
      </div>
    </div> <!-- /.modal-content -->
  </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
<!-- /ko -->

  </body>
</html>